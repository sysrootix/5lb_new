# Исправление входа через Telegram WebApp

## Что было исправлено?

**Проблема:** После входа через Telegram WebApp зарегистрированных пользователей перенаправляло на страницу регистрации вместо главной страницы.

**Решение:** Добавлена проверка флага `isRegistrationComplete` перед перенаправлением на регистрацию.

## Что нужно сделать?

### 1. Запустите скрипт исправления данных (рекомендуется)

Этот скрипт исправит флаг `isRegistrationComplete` для существующих пользователей:

```bash
cd backend
npm run fix:registration
```

Скрипт автоматически найдёт пользователей с заполненными данными (имя, фамилия, дата рождения), но неверным флагом, и исправит их.

### 2. Перезапустите приложение

```bash
# Если backend не работает, запустите:
cd backend
npm run dev

# Если frontend не работает, запустите:
cd frontend
npm run dev
```

## Как проверить, что всё работает?

1. Откройте Telegram WebApp
2. Войдите с учётной записью, где регистрация уже завершена
3. Вас должно перенаправить на главную страницу (`/`), а не на страницу регистрации

## Изменённые файлы

- ✅ `frontend/src/App.tsx` - автоматический вход через Telegram
- ✅ `frontend/src/pages/Login.tsx` - вход через кнопку Telegram
- ✅ `frontend/src/pages/CompleteRegistration.tsx` - защита от повторной регистрации
- ✅ `backend/scripts/fix-registration-complete.ts` - скрипт исправления данных
- ✅ `backend/package.json` - добавлена команда `fix:registration`

## Дополнительная информация

Подробную техническую документацию смотрите в файле `TELEGRAM_LOGIN_FIX.md` (на английском).

