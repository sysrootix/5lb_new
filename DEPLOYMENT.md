# üöÄ –î–µ–ø–ª–æ–π–º–µ–Ω—Ç 5LB

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –î–µ–ø–ª–æ–π –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + CRM)
./deploy-all.sh

# –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
./deploy-all.sh app

# –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ CRM
./deploy-all.sh crm

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
./deploy-all.sh --help
```

## –û–ø–∏—Å–∞–Ω–∏–µ

### `deploy-all.sh` - –ï–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ 5LB.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –î–µ–ø–ª–æ–π –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ + –±—ç–∫–µ–Ω–¥)
- ‚úÖ –î–µ–ø–ª–æ–π CRM (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ + –±—ç–∫–µ–Ω–¥)
- ‚úÖ –î–µ–ø–ª–æ–π –æ–±–æ–∏—Ö –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
5lb/
‚îú‚îÄ‚îÄ deploy-all.sh          # ‚≠ê –ù–æ–≤—ã–π –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ deploy.sh              # –°—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç (–≤—ã–∑—ã–≤–∞–µ—Ç deploy-all.sh app)
‚îú‚îÄ‚îÄ frontend/              # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ backend/               # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - –±—ç–∫–µ–Ω–¥
‚îî‚îÄ‚îÄ crm/
    ‚îú‚îÄ‚îÄ deploy.sh          # –°—Ç–∞—Ä—ã–π CRM —Å–∫—Ä–∏–ø—Ç (–≤—ã–∑—ã–≤–∞–µ—Ç deploy-all.sh crm)
    ‚îú‚îÄ‚îÄ crm_frontend/      # CRM —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
    ‚îî‚îÄ‚îÄ crm_backend/       # CRM –±—ç–∫–µ–Ω–¥
```

## –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

### –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`./deploy-all.sh app`)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - `npm run optimize-images`
2. **–°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞** - `npm run build:frontend` (Vite)
3. **–°–±–æ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞** - `npm run build:backend` (TypeScript)
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - `rsync` –≤ `/var/www/5lb/dist/`
5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫** - `pm2 reload 5lb-backend`

### CRM (`./deploy-all.sh crm`)

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - `npm install` –≤ frontend –∏ backend
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma** - `npx prisma generate`
3. **–°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞** - `npm run build` (Vite)
4. **–°–±–æ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞** - `npx tsc`
5. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - `rsync` –≤ `/var/www/5lb-crm/`
6. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫** - `pm2 reload 5lb-crm-backend`

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞—é—Ç –Ω–æ–≤—ã–π –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
# –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: ./deploy-all.sh app
./deploy.sh

# –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ: ./deploy-all.sh crm
./crm/deploy.sh
```

## PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
pm2 status
pm2 logs 5lb-backend
pm2 logs 5lb-crm-backend
```
